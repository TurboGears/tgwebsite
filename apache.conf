<IfDefine DEFAULT_VHOST>

# Misc Services (Historical)
<VirtualHost *:80>
	ServerName docs.turbogears.org
	RedirectMatch permanent ^/(\d\.\d)/?$ http://www.turbogears.org/$1/docs/
	RedirectMatch permanent ^/(\d\.\d)/(?:docs/)?(.+)(?:\.html)?(#.*)?(\?.*)?$ http://www.turbogears.org/$1/docs/$2.html$3$4
	RedirectPermanent / http://www.turbogears.org/en/documentation
</VirtualHost>
<VirtualHost *:80>
	ServerName download.turbogears.org
	RedirectMatch /(\d+\.\d+)(/.*)? http://www.turbogears.org/$1/downloads$2
	RedirectMatch / http://www.turbogears.org/
</VirtualHost>
<VirtualHost *:80>
	ServerName files.turbogears.org
	RedirectMatch /(\d+\.\d+)(/.*)? http://www.turbogears.org/$1/downloads$2
	RedirectMatch / http://www.turbogears.org/
</VirtualHost>

# Version Control Redirects (Git & SVN)
<VirtualHost *:80>
	ServerName svn.turbogears.org
	RedirectMatch /(/.*)? http://sourceforge.net/p/turbogears1/code/$1
</VirtualHost>

<VirtualHost *:80>
	ServerName git.turbogears.org
	RedirectMatch /(/.*)? https://github.com/TurboGears/tg2/$1
</VirtualHost>
<VirtualHost *:80>
	ServerName git-tg2.turbogears.org
	RedirectMatch /(/.*)? https://github.com/TurboGears/tg2/$1
</VirtualHost>
<VirtualHost *:80>
	ServerName git-doc.turbogears.org
	RedirectMatch /(/.*)? https://github.com/TurboGears/tg2docs/$1
</VirtualHost>
<VirtualHost *:80>
	ServerName git-devtools.turbogears.org
	RedirectMatch /(/.*)? https://github.com/TurboGears/tg2devtools/$1
</VirtualHost>

# planet tg
<VirtualHost *:80>
	ServerName planet.turbogears.org
	DocumentRoot /home/turbogearsorg/var/static/planet
	<Directory /home/turbogearsorg/var/static/planet>
	   Options None
	   AllowOverride None
	   Order allow,deny
	   Allow from all
	</Directory>
</VirtualHost>

# package management redirects
<VirtualHost *:80>
	ServerName tg.gy
	RedirectMatch ^/(\d{1,2})(\d{1,2})(\d{1,2})(rc\d{1,2})(/index)?(.*?)$ http://www.turbogears.org/$1.$2/downloads/$1.$2.$3$4/index$6
	RedirectMatch ^/(\d)(\d)(\d)(/index)?(.*?)$ http://www.turbogears.org/$1.$2/downloads/$1.$2.$3/index$5
	RedirectMatch ^/(\d{1,2})(\d{1,2})(a\d{1,2}|b\d{1,2}|rc\d{1,2}|svn)(/index)?(.*?)$ http://www.turbogears.org/$1.$2/downloads/$1.$2$3/$5
	RedirectMatch ^/(\d{1,2})\.(\d{1,2})\.(\d{1,2})(/index)?(.*?)$ http://www.turbogears.org/$1.$2/downloads/$1.$2.$3/index$5
	RedirectMatch ^/(current|development|next)(/index)?(.*?)$ http://www.turbogears.org/2.2/downloads/$1/index$3
	#RedirectMatch ^/(beta)(/index)?(.*?)$ http://www.turbogears.org/2.2/downloads/$1/index$3
	RedirectMatch ^/(.*$) http://tg.gy/current/index/$1

	ErrorLog /var/log/apache2/tg.gy-error.log
	CustomLog /var/log/apache2/tg.gy-access.log combined
</VirtualHost>
</IfDefine>
