
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tg-admin Command Plugins &mdash; TurboGears 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/tg.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <script type="text/javascript" src="_static/header.js"></script>
    <link rel="top" title="TurboGears 1.0 documentation" href="index.html" />
    <link rel="next" title="Extending Quickstart" href="ExtendingQuickstart.html" />
    <link rel="prev" title="Writing a Template Engine" href="TemplatePlugins.html" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ExtendingQuickstart.html" title="Extending Quickstart"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="TemplatePlugins.html" title="Writing a Template Engine"
             accesskey="P">previous</a> |</li>
<li><a href="index.html">TurboGears 1.0 documentation</a> &raquo;</li>
<li id="searchbox" style="display: none; margin: 0 20px;" class="right">
  <form class="search" action="search.html" method="get">
    <span>Search:</span>
    <input type="text" name="q" size="18" />
    <input type="submit" value="Go" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</li>
<script type="text/javascript">$('#searchbox').show(0);</script>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">TurboGears 1.0 FAQ</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Install/index.html">Downloading and Installing TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install/Deployment.html">Deploying TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Database/index.html">Database Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/BigPicture.html">The Big Picture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TGScreencasts.html">TurboGears Screencasts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Wiki20/Page1.html">The 20 Minutes Wiki</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Controller.html">Controller Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Arguments.html">I Wanted An Argument!</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/UseDatabase.html">Data Model Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Kid.html">A Brief Introduction to Kid Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/MochiKit.html">A Brief Introduction to MochiKit</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Identity/GettingStarted.html">Getting Started With Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Introduction.html">Introduction To Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/SimpleForm.html">Simple Widget Form Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileUploadTutorial.html">File Upload Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ToDoListTutorial.html">Brian&#8217;s TurboGears Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TgAdmin.html">tg-admin command line tool reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="QuickStart.html">Are you ready to gear up?</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Server.html">Starting Up The Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">TurboGears Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingBigApplications.html">Creating Big Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="SpecificProblems.html">Solving specific problems</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Arguments.html">I Wanted An Argument!</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/URLs.html">Using URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingBigApplications.html">Creating Big Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="RequestResponse.html">Access Request/Response Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="StaticFiles.html">Serving Static Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cookies.html">Using Cookies in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sessions.html">Using Sessions in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="FeedController.html">Serving RSS and Atom feeds</a></li>
<li class="toctree-l1"><a class="reference internal" href="UnifiedControllers.html">Unified Form Data Validation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ExposeDecorator.html">&#64;expose()</a></li>
<li class="toctree-l1"><a class="reference internal" href="ValidateDecorator.html">&#64;validate()</a></li>
<li class="toctree-l1"><a class="reference internal" href="ErrorHandling.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/Usage.html">Using Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="PaginateDecorator.html">&#64;paginate()</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="StdVars.html"><tt class="docutils literal"><span class="pre">stdvars</span></tt>: Global Template Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="HeadersFooters.html">Application-wide Headers and Footers</a></li>
<li class="toctree-l1"><a class="reference internal" href="JSON.html">JSON Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="Designer.html">Designer-Friendly Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="DummyTemplate.html">Dummy Kid Template for Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="KidHTMLEntities.html">HTML Entities in Kid templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="CheckedCheckBox.html">Automatically Checking a Checkbox or Radio Button</a></li>
<li class="toctree-l1"><a class="reference internal" href="BreadCrumb.html">Breadcrumb Style Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingBigApplications.html">Creating Big Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="NonPackagedKidTemplates.html">Loading Kid templates from outside your application package</a></li>
<li class="toctree-l1"><a class="reference internal" href="GenshiInternationalizationWithBabel.html">Genshi Templates Internationalization with Babel</a></li>
<li class="toctree-l1"><a class="reference internal" href="AdvancedCheetahTemplates.html">Templates for using TurboCheetah with TurboGears</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/DefineDatabase.html">Data Model Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="BackEndOverview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="BackEndOverview.html#supported-backends">Supported backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="DbUri.html">The DB-URI</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/index.html">SQLObject Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="TgAdminSqlUpgrade.html">How to Use <tt class="docutils literal"><span class="pre">tgadmin</span> <span class="pre">sql</span> <span class="pre">upgrade</span></tt> with SQLObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelOutsideTG.html">Using Your Model Outside of TurboGears Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="MultipleDatabases.html">Using Multiple Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/AutoUpdateField.html">Auto-updating an attribute with SQLObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Debug.html">SQLObject Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/DirectSQL.html">SQLObject direct SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/ForeignKeys.html">SQLObject Foreign Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/QuickGuide.html">SQLObject Quick Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/ReservedWords.html">Avoiding SQL reserved words in the model definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Caching.html">SQLObject Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Gotchas.html">SQLObject &#8220;gotcha&#8217;s&#8221;</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/StoringAndRetrievingFiles.html">Storing and Retrieving Files from a Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Views.html">Views in SQLObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/VsHibernate.html">Hibernate vs SqlObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLAlchemy/Configuration.html">SQLAlchemy Configuration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Overview.html">Widgets Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/index.html">Guide to the TurboGears Widgets Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Browser.html">WidgetBrowser</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Explore.html">Dive Into Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/SimpleForm.html">Simple Widget Form Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/FormValidationWithSchemas.html">Widget Form Validation with Schemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/ModifyDefaults.html">Changing Widget Defaults at Run Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/DynamicForm.html">Dynamically Modifying a Form&#8217;s Widgets With Ajax</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicValidation.html">Dynamic Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Packages.html">Widget Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/StatelessWidgets.html">StatelessWidgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/DataGrid.html">DataGrid</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/AjaxGrid.html">Ajax Grid Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/AutoCompleteField.html">The AutoCompleteField Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/RemoteForm.html">RemoteForm Widget Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/RemoteLink.html">Wrap Ajax Operations in Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/CompoundWidgets.html">Implementing and using CompoundWidgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/RepeatingFieldSet.html">RepeatingFieldSet Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/CalendarDatePicker.html">CalendarDatePicker Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/NicerForms.html">Nicer Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="FastData/index.html">FastData</a></li>
<li class="toctree-l1"><a class="reference internal" href="FastData/DataController.html">DataController</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Recipes.html">Widget Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Tips.html">Widget Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="ToscaWidgets.html">Using ToscaWidgets in TurboGears 1.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Visit/index.html">Using the Visit Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visit/Extending.html">Extending the Visit Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visit/UserTrackedLogging.html">User Tracked Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visit/PermanentLogin.html">Permanent Login</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/index.html">Identity Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/GettingStarted.html">Getting Started With Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/Usage.html">Using Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/EncryptedPassword.html">Using Identity with Encrypted Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/Recipes.html">Identity Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/OpenID.html">OpenID Authentication with TurboGears Identity</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Testing.html">Testing Your Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="LoggingSystem.html">Understanding the Logging System</a></li>
<li class="toctree-l1"><a class="reference internal" href="ErrorReporting.html">Custom Error Reporting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Debugging.html">Debugging a TurboGears Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="DummyTemplate.html">Dummy Kid Template for Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Debug.html">SQLObject Debugging</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Optimization.html">Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="CachingTechniques.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="GzipCompressing.html">Gzip Compressing Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="UsingPylint.html">Using Pylint to Improve the Quality of Your Code</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Toolbox.html">TurboGears Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="Admi18n.html">The Admi18n Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="Catwalk.html">CatWalk</a></li>
<li class="toctree-l1"><a class="reference internal" href="FastData/DataController.html">DataController</a></li>
<li class="toctree-l1"><a class="reference internal" href="VersionInfo.html">Toolbox Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelDesigner.html">ModelDesigner</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebConsole.html">Web Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Browser.html">WidgetBrowser</a></li>
<li class="toctree-l1"><a class="reference internal" href="DreamWeaverIntegration.html">DreamWeaver Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="VimIntegration.html">Vim Editor Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FlashNotes.html">Using Flash Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="JsonifyDecorator.html">The <tt class="docutils literal"><span class="pre">jsonify</span></tt> Decorator</a></li>
<li class="toctree-l1"><a class="reference internal" href="Internationalization.html">Internationalizing your application</a></li>
<li class="toctree-l1"><a class="reference internal" href="UnicodeTips.html">Tips for Using Non-ASCII Characters in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scheduler.html">Scheduling Tasks with TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="ErrorReporting.html">Custom Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="ZeroConfSupport.html">Zeroconf support in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="StartupHook.html">Startup Hook</a></li>
<li class="toctree-l1"><a class="reference internal" href="CRUDTemplate.html">CRUD Template</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESTfulPath.html">RESTful URLs with TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESTfulPaginate.html">RESTful Pagination Using the Paginate Decorator</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebServices.html">WebServices with TGWebServices</a></li>
<li class="toctree-l1"><a class="reference internal" href="OAuthAuthentication.html">Validating Signed Requests from OpenSocial Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="GenerateFigures.html">Generating Graphs and Figures in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileUploadTutorial.html">File Upload Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileUploadProgressBar.html">File Upload Progress Bar</a></li>
<li class="toctree-l1"><a class="reference internal" href="AlternativeComponents.html">Alternative Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/UseElixir.html">Getting Started with Elixir</a></li>
<li class="toctree-l1"><a class="reference internal" href="RoutesIntegration.html">Using Routes with TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="EntryPointList.html">TurboGears Entry Point list</a></li>
<li class="toctree-l1"><a class="reference internal" href="MakingYourAppExtensible.html">Making Extensible Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="TurboGearsAndMicroApps.html">What does this have to do with TurboGears?</a></li>
<li class="toctree-l1"><a class="reference internal" href="TurboGearsAndMicroApps.html#an-example-is-worth-a-thousand-pages-worth-of-blather">An example is worth a thousand pages worth of blather</a></li>
<li class="toctree-l1"><a class="reference internal" href="TurboGearsAndMicroApps.html#now-for-the-bad-news">Now for the bad news</a></li>
<li class="toctree-l1"><a class="reference internal" href="UsingSphinx.html">Using Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="CookieDefault.html">Cookie Default</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConvertCookies.html">Converting Between Cookie Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="ExtraRequestParams.html">Handling Extra Request Parameters With CherryPy Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="RouteByHttpMethod.html">Routing Requests According to HTTP Request Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="VirtualHost.html">Virtual Host</a></li>
<li class="toctree-l1"><a class="reference internal" href="GenshiRenderingWithoutExpose.html">Genshi Rendering without using &#64;expose()</a></li>
<li class="toctree-l1"><a class="reference internal" href="ServeDynamicFiles.html">Serving Dynamically Generated Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="HybridNestedSetModel.html">Hybrid Nested Set Model for Hierarchical Storage of SQLObject Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="SockFile.html">Connecting to MySQL via a socket file</a></li>
<li class="toctree-l1"><a class="reference internal" href="SelectingOption.html">Setting the selected option of a SELECT element</a></li>
<li class="toctree-l1"><a class="reference internal" href="DojoIEWorkaround.html">Dojo / IE workaround</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Philosophy.html">TurboGears Project Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="Plugins.html">TurboGears Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="TemplatePlugins.html">Writing a Template Engine</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href=""><tt class="docutils literal"><span class="pre">tg-admin</span></tt> Command Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-basic-command-plugin">A basic command plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-file-structure">The file structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-py"><tt class="docutils literal"><span class="pre">setup.py</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#testcommand-py"><tt class="docutils literal"><span class="pre">testcommand.py</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-the-test-plugin">Installing the test plugin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-plugin-for-distribution">Building the plugin for distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requiring-that-the-command-is-run-in-a-project">Requiring that the command is run in a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requiring-access-to-a-database">Requiring access to a database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#listing-the-command-in-the-cogbin">Listing the command in the CogBin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ExtendingQuickstart.html">Extending Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">TurboGears Licenses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ThirdParty.html">ThirdParty Components Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ChangeLog.html">TurboGears Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TGBooks.html">TurboGears Books</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TGArticles.html">TuboGears Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="PresentationMaterial.html">TurboGears presentation material</a></li>
</ul>

        </div>
      </div>


    <div class="document">
  <div class="documentwrapper">
    <div class="body headerfix">
      
  <div class="section" id="tg-admin-command-plugins">
<h1><a class="toc-backref" href="#id1"><tt class="docutils literal"><span class="pre">tg-admin</span></tt> Command Plugins</a><a class="headerlink" href="#tg-admin-command-plugins" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#tg-admin-command-plugins" id="id1"><tt class="docutils literal"><span class="pre">tg-admin</span></tt> Command Plugins</a><ul>
<li><a class="reference internal" href="#a-basic-command-plugin" id="id2">A basic command plugin</a></li>
<li><a class="reference internal" href="#building-the-plugin-for-distribution" id="id3">Building the plugin for distribution</a></li>
<li><a class="reference internal" href="#requiring-that-the-command-is-run-in-a-project" id="id4">Requiring that the command is run in a project</a></li>
<li><a class="reference internal" href="#requiring-access-to-a-database" id="id5">Requiring access to a database</a></li>
</ul>
</li>
</ul>
</div>
<p>This page details how you can create your own plugins for the command line tool
<tt class="docutils literal"><span class="pre">tg-admin</span></tt>. This allows you to create command-line tools that are tailored to
your site, or make something general enough to put up on PyPI so anyone can
install it. The command plugin system is actually not as daunting as it seems
at first, it just requires a little bit of familiarity with <tt class="docutils literal"><span class="pre">setuptools</span></tt>.
For a more thorough explanation of the <tt class="docutils literal"><span class="pre">setuptools</span></tt> concepts used here, see
<a class="reference internal" href="UsingEntryPoints.html"><em>Using Entry Points</em></a></p>
<div class="section" id="a-basic-command-plugin">
<h2><a class="toc-backref" href="#id2">A basic command plugin</a><a class="headerlink" href="#a-basic-command-plugin" title="Permalink to this headline">¶</a></h2>
<p>To illustrate how the command plugin system works, let&#8217;s build a very basic
command plugin named <tt class="docutils literal"><span class="pre">testcommand</span></tt>. This plugin will do nothing but print
&#8220;This is a test&#8221;, when run from the command line. (using
<tt class="docutils literal"><span class="pre">tg-admin</span> <span class="pre">testcommand</span></tt>)</p>
<div class="section" id="the-file-structure">
<h3>The file structure<a class="headerlink" href="#the-file-structure" title="Permalink to this headline">¶</a></h3>
<p>Our test plugin only needs two files in a few directories to get started. Here
is what you will need:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">testcommand</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">py</span>
<span class="n">testcommand</span><span class="o">/</span><span class="n">testcommand</span><span class="o">/</span><span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="n">testcommand</span><span class="o">/</span><span class="n">testcommand</span><span class="o">/</span><span class="n">testcommand</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The file <tt class="docutils literal"><span class="pre">setup.py</span></tt> defines the package. <tt class="docutils literal"><span class="pre">testcommand.py</span></tt> is where the class
implementing <tt class="docutils literal"><span class="pre">testcommand</span></tt> will go.  <tt class="docutils literal"><span class="pre">__init__.py</span></tt> can be empty;
<tt class="docutils literal"><span class="pre">find_packages</span></tt> needs it to detect the package.</p>
</div>
<div class="section" id="setup-py">
<h3><tt class="docutils literal"><span class="pre">setup.py</span></tt><a class="headerlink" href="#setup-py" title="Permalink to this headline">¶</a></h3>
<p>Out of these two the most important to getting started is <tt class="docutils literal"><span class="pre">setup.py</span></tt>, so
let&#8217;s take a look at that:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
<span class="kn">from</span> <span class="nn">turbogears.finddata</span> <span class="kn">import</span> <span class="n">find_package_data</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;testcommand&quot;</span><span class="p">,</span>
    <span class="n">version</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">zip_safe</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="n">install_requires</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;TurboGears &gt;= 1.0&quot;</span><span class="p">,],</span>
    <span class="n">packages</span> <span class="o">=</span> <span class="n">find_packages</span><span class="p">(),</span>
    <span class="n">package_data</span> <span class="o">=</span> <span class="n">find_package_data</span><span class="p">(),</span>
    <span class="n">entry_points</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">    [turbogears.command]</span>
<span class="s">        testcommand = testcommand.testcommand:TestCommand</span>
<span class="s">    &quot;&quot;&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The two import statements at the beginning of the file bring in functions that
we use later in the file. <tt class="docutils literal"><span class="pre">setup</span></tt> is used by setuptools to define a new
package, which is in turn used by TurboGears to define the command plugin.
<tt class="docutils literal"><span class="pre">find_packages</span></tt> and <tt class="docutils literal"><span class="pre">find_package_data</span></tt> are used to gather resources for
our package.</p>
<p>The call to <tt class="docutils literal"><span class="pre">setup</span></tt> is used to define a new package. Here is a brief
description of what the arguments used here do:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt> - Defines the name of the package. This can be used in the
<tt class="docutils literal"><span class="pre">install_requires</span></tt> argument of other packages to handle dependencies.</li>
<li><tt class="docutils literal"><span class="pre">version</span></tt> - The version number of this package. This can be used in the
<tt class="docutils literal"><span class="pre">install_requires</span></tt> argument of other packages to make sure the proper
version. of this package is installed.</li>
<li><tt class="docutils literal"><span class="pre">zip_safe</span></tt> - Tells <tt class="docutils literal"><span class="pre">setuptools</span></tt> if it is safe to run the files in this
package from a compressed archive. It is set to false here because I don&#8217;t
have any information on what constitutes safety in running code from an
archive.</li>
<li><tt class="docutils literal"><span class="pre">install_requires</span></tt> - This is a list of either quoted package names, or
name/version comparisons that list the dependencies of this package. In this
case we are requiring a copy of <tt class="docutils literal"><span class="pre">TurboGears</span></tt>, version 1.0 or greater.
(Note for 0.9 users, you should be able to change this to fit your version
without effect)</li>
<li><tt class="docutils literal"><span class="pre">entry_points</span></tt> - The string listed here will be rewritten as a
configuration file that defines where this code may be called from.
When <tt class="docutils literal"><span class="pre">tg-admin</span></tt> starts up it looks at the <tt class="docutils literal"><span class="pre">turbogears.command</span></tt> entry
point for a list of modules and command names to use. The statement
<tt class="docutils literal"><span class="pre">testcommand</span> <span class="pre">=</span> <span class="pre">testcommand.testcommand.TestCommand</span></tt> tells it to register
<tt class="docutils literal"><span class="pre">testcommand</span></tt> as a <tt class="docutils literal"><span class="pre">tg-admin</span></tt> command, and directs it to use the
<tt class="docutils literal"><span class="pre">TestCommand</span></tt> class in the module <tt class="docutils literal"><span class="pre">testcommand.testcommand</span></tt>.</li>
</ul>
<p>There are a lot of additional arguemnts to <tt class="docutils literal"><span class="pre">setup()</span></tt>, which can be used to
define more information about your package and provide information that is used
to upload it to PyPI. Please refer to the official Python <a class="reference external" href="http://docs.python.org/dist/setup-script.html">documentation for
distutils</a> and the <a class="reference external" href="http://peak.telecommunity.com/DevCenter/setuptools#new-and-changed-setup-keywords">setuptools documentation</a> for more information.</p>
</div>
<div class="section" id="testcommand-py">
<h3><tt class="docutils literal"><span class="pre">testcommand.py</span></tt><a class="headerlink" href="#testcommand-py" title="Permalink to this headline">¶</a></h3>
<p>This file contains the <tt class="docutils literal"><span class="pre">TestCommand</span></tt> class, which the <tt class="docutils literal"><span class="pre">setup.py</span></tt> file
directs to use when <tt class="docutils literal"><span class="pre">tg-admin</span> <span class="pre">testcommand</span></tt> is executed. Here are the contents
of the file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">TestCommand</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Tests command-line plugin.&quot;&quot;&quot;</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="s">&quot;Print test output from a command line plugin&quot;</span>
    <span class="n">need_project</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">package</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">__version__</span> <span class="o">=</span> <span class="s">&quot;0.1&quot;</span>
    <span class="n">__author__</span> <span class="o">=</span> <span class="s">&quot;John Doe&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;This is a test&quot;</span>
</pre></div>
</div>
<p>The command line plugin system looks for a few attributes and a <tt class="docutils literal"><span class="pre">run</span></tt> method
defined in a class. The attributes listed here are the bare minimum needed for
the command plugin to work. There are more options that will be discussed
later. The <tt class="docutils literal"><span class="pre">run</span></tt> method is called when the plugin is run, and should be the
start of the plugin&#8217;s functionality.</p>
</div>
<div class="section" id="installing-the-test-plugin">
<h3>Installing the test plugin<a class="headerlink" href="#installing-the-test-plugin" title="Permalink to this headline">¶</a></h3>
<p>Before TurboGears can use the test plugin, it needs to be installed. To do this
navigate to the directory where the setup.py file for your project is located
and enter the following command:</p>
<div class="highlight-python"><pre>python setup.py develop</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">develop</span></tt> argument instructs the <tt class="docutils literal"><span class="pre">setup()</span></tt> function in <tt class="docutils literal"><span class="pre">setup.py</span></tt> to
install a development build of the plugin on your system. This will generate
egg information for the package, and place a <tt class="docutils literal"><span class="pre">testcommand.egg-link</span></tt> file in
the <tt class="docutils literal"><span class="pre">site-packages</span></tt> folder in your Python library directory, so that Python
can find the package of your command plugin and it can be imported directly
from the development directory. Now you should be able to run
<tt class="docutils literal"><span class="pre">tg-admin</span> <span class="pre">testcommand</span></tt> and see the desired result. It should look something
like this:</p>
<div class="highlight-python"><pre>$ tg-admin testcommand
This is a test</pre>
</div>
<p>Granted, it is nothing fancy, but it works. Extending it to incorporate the
functionality you want is not very difficult either.</p>
</div>
</div>
<div class="section" id="building-the-plugin-for-distribution">
<h2><a class="toc-backref" href="#id3">Building the plugin for distribution</a><a class="headerlink" href="#building-the-plugin-for-distribution" title="Permalink to this headline">¶</a></h2>
<p>Aside from the turbogears.command entry point, the distribution of your command
plugin is no different from any other TurboGears component. See the
<a class="reference internal" href="Install/DeployWithAnEgg.html"><em>page on .egg distribution</em></a> for more information.</p>
</div>
<div class="section" id="requiring-that-the-command-is-run-in-a-project">
<h2><a class="toc-backref" href="#id4">Requiring that the command is run in a project</a><a class="headerlink" href="#requiring-that-the-command-is-run-in-a-project" title="Permalink to this headline">¶</a></h2>
<p>It is pretty easy to ensure that your command is run inside a project. Just set
<tt class="docutils literal"><span class="pre">need_project</span> <span class="pre">=</span> <span class="pre">True</span></tt> in your command class. Here is a sample:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ProjectRequiringCommand</span><span class="p">:</span>
    <span class="n">desc</span><span class="o">=</span><span class="s">&quot;This command must be run in a project&quot;</span>
    <span class="n">need_project</span><span class="o">=</span><span class="bp">True</span>

<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="requiring-access-to-a-database">
<h2><a class="toc-backref" href="#id5">Requiring access to a database</a><a class="headerlink" href="#requiring-access-to-a-database" title="Permalink to this headline">¶</a></h2>
<p><em>To be done...</em></p>
<div class="section" id="listing-the-command-in-the-cogbin">
<h3>Listing the command in the CogBin<a class="headerlink" href="#listing-the-command-in-the-cogbin" title="Permalink to this headline">¶</a></h3>
<p>Once your command is listed on PyPI/Cheeseshop with a <tt class="docutils literal"><span class="pre">turbogears.command</span></tt>
keyword, it will automatically appear in the &#8220;tg-admin Commands&#8221; section of the
<a class="reference external" href="http://www.turbogears.org/cogbin/">CogBin</a>.</p>
</div>
</div>
</div>


    </div>
  </div>
      <div class="clearer"></div>
    </div>
  <div class="footer"><span>
      &copy; Copyright 
      by the <a href="">TurboGears</a> Doc Team.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
  </span></div>
  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-7088080-2");
  pageTracker._trackPageview();
  } catch(err) {}</script>
  </body>
</html>