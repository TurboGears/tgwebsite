
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Generating Graphs and Figures in TurboGears &mdash; TurboGears 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/tg.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <script type="text/javascript" src="_static/header.js"></script>
    <link rel="top" title="TurboGears 1.0 documentation" href="index.html" />
    <link rel="next" title="File Upload Tutorial" href="FileUploadTutorial.html" />
    <link rel="prev" title="Validating Signed Requests from OpenSocial Applications" href="OAuthAuthentication.html" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="FileUploadTutorial.html" title="File Upload Tutorial"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="OAuthAuthentication.html" title="Validating Signed Requests from OpenSocial Applications"
             accesskey="P">previous</a> |</li>
<li><a href="index.html">TurboGears 1.0 documentation</a> &raquo;</li>
<li id="searchbox" style="display: none; margin: 0 20px;" class="right">
  <form class="search" action="search.html" method="get">
    <span>Search:</span>
    <input type="text" name="q" size="18" />
    <input type="submit" value="Go" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</li>
<script type="text/javascript">$('#searchbox').show(0);</script>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">TurboGears 1.0 FAQ</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Install/index.html">Downloading and Installing TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install/Deployment.html">Deploying TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Database/index.html">Database Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/BigPicture.html">The Big Picture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TGScreencasts.html">TurboGears Screencasts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Wiki20/Page1.html">The 20 Minutes Wiki</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Controller.html">Controller Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Arguments.html">I Wanted An Argument!</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/UseDatabase.html">Data Model Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Kid.html">A Brief Introduction to Kid Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/MochiKit.html">A Brief Introduction to MochiKit</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Identity/GettingStarted.html">Getting Started With Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Introduction.html">Introduction To Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/SimpleForm.html">Simple Widget Form Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileUploadTutorial.html">File Upload Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ToDoListTutorial.html">Brian&#8217;s TurboGears Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TgAdmin.html">tg-admin command line tool reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="QuickStart.html">Are you ready to gear up?</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Server.html">Starting Up The Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">TurboGears Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingBigApplications.html">Creating Big Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="SpecificProblems.html">Solving specific problems</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Arguments.html">I Wanted An Argument!</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/URLs.html">Using URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingBigApplications.html">Creating Big Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="RequestResponse.html">Access Request/Response Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="StaticFiles.html">Serving Static Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cookies.html">Using Cookies in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sessions.html">Using Sessions in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="FeedController.html">Serving RSS and Atom feeds</a></li>
<li class="toctree-l1"><a class="reference internal" href="UnifiedControllers.html">Unified Form Data Validation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ExposeDecorator.html">&#64;expose()</a></li>
<li class="toctree-l1"><a class="reference internal" href="ValidateDecorator.html">&#64;validate()</a></li>
<li class="toctree-l1"><a class="reference internal" href="ErrorHandling.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/Usage.html">Using Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="PaginateDecorator.html">&#64;paginate()</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="StdVars.html"><tt class="docutils literal"><span class="pre">stdvars</span></tt>: Global Template Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="HeadersFooters.html">Application-wide Headers and Footers</a></li>
<li class="toctree-l1"><a class="reference internal" href="JSON.html">JSON Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="Designer.html">Designer-Friendly Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="DummyTemplate.html">Dummy Kid Template for Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="KidHTMLEntities.html">HTML Entities in Kid templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="CheckedCheckBox.html">Automatically Checking a Checkbox or Radio Button</a></li>
<li class="toctree-l1"><a class="reference internal" href="BreadCrumb.html">Breadcrumb Style Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingBigApplications.html">Creating Big Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="NonPackagedKidTemplates.html">Loading Kid templates from outside your application package</a></li>
<li class="toctree-l1"><a class="reference internal" href="GenshiInternationalizationWithBabel.html">Genshi Templates Internationalization with Babel</a></li>
<li class="toctree-l1"><a class="reference internal" href="AdvancedCheetahTemplates.html">Templates for using TurboCheetah with TurboGears</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/DefineDatabase.html">Data Model Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="BackEndOverview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="BackEndOverview.html#supported-backends">Supported backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="DbUri.html">The DB-URI</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/index.html">SQLObject Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="TgAdminSqlUpgrade.html">How to Use <tt class="docutils literal"><span class="pre">tgadmin</span> <span class="pre">sql</span> <span class="pre">upgrade</span></tt> with SQLObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelOutsideTG.html">Using Your Model Outside of TurboGears Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="MultipleDatabases.html">Using Multiple Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/AutoUpdateField.html">Auto-updating an attribute with SQLObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Debug.html">SQLObject Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/DirectSQL.html">SQLObject direct SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/ForeignKeys.html">SQLObject Foreign Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/QuickGuide.html">SQLObject Quick Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/ReservedWords.html">Avoiding SQL reserved words in the model definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Caching.html">SQLObject Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Gotchas.html">SQLObject &#8220;gotcha&#8217;s&#8221;</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/StoringAndRetrievingFiles.html">Storing and Retrieving Files from a Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Views.html">Views in SQLObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/VsHibernate.html">Hibernate vs SqlObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLAlchemy/Configuration.html">SQLAlchemy Configuration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Overview.html">Widgets Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/index.html">Guide to the TurboGears Widgets Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Browser.html">WidgetBrowser</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Explore.html">Dive Into Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/SimpleForm.html">Simple Widget Form Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/FormValidationWithSchemas.html">Widget Form Validation with Schemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/ModifyDefaults.html">Changing Widget Defaults at Run Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/DynamicForm.html">Dynamically Modifying a Form&#8217;s Widgets With Ajax</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicValidation.html">Dynamic Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Packages.html">Widget Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/StatelessWidgets.html">StatelessWidgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/DataGrid.html">DataGrid</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/AjaxGrid.html">Ajax Grid Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/AutoCompleteField.html">The AutoCompleteField Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/RemoteForm.html">RemoteForm Widget Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/RemoteLink.html">Wrap Ajax Operations in Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/CompoundWidgets.html">Implementing and using CompoundWidgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/RepeatingFieldSet.html">RepeatingFieldSet Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/CalendarDatePicker.html">CalendarDatePicker Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/NicerForms.html">Nicer Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="FastData/index.html">FastData</a></li>
<li class="toctree-l1"><a class="reference internal" href="FastData/DataController.html">DataController</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Recipes.html">Widget Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Tips.html">Widget Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="ToscaWidgets.html">Using ToscaWidgets in TurboGears 1.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Visit/index.html">Using the Visit Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visit/Extending.html">Extending the Visit Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visit/UserTrackedLogging.html">User Tracked Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visit/PermanentLogin.html">Permanent Login</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/index.html">Identity Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/GettingStarted.html">Getting Started With Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/Usage.html">Using Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/EncryptedPassword.html">Using Identity with Encrypted Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/Recipes.html">Identity Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/OpenID.html">OpenID Authentication with TurboGears Identity</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Testing.html">Testing Your Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="LoggingSystem.html">Understanding the Logging System</a></li>
<li class="toctree-l1"><a class="reference internal" href="ErrorReporting.html">Custom Error Reporting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Debugging.html">Debugging a TurboGears Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="DummyTemplate.html">Dummy Kid Template for Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Debug.html">SQLObject Debugging</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Optimization.html">Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="CachingTechniques.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="GzipCompressing.html">Gzip Compressing Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="UsingPylint.html">Using Pylint to Improve the Quality of Your Code</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Toolbox.html">TurboGears Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="Admi18n.html">The Admi18n Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="Catwalk.html">CatWalk</a></li>
<li class="toctree-l1"><a class="reference internal" href="FastData/DataController.html">DataController</a></li>
<li class="toctree-l1"><a class="reference internal" href="VersionInfo.html">Toolbox Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelDesigner.html">ModelDesigner</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebConsole.html">Web Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Browser.html">WidgetBrowser</a></li>
<li class="toctree-l1"><a class="reference internal" href="DreamWeaverIntegration.html">DreamWeaver Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="VimIntegration.html">Vim Editor Integration</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="FlashNotes.html">Using Flash Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="JsonifyDecorator.html">The <tt class="docutils literal"><span class="pre">jsonify</span></tt> Decorator</a></li>
<li class="toctree-l1"><a class="reference internal" href="Internationalization.html">Internationalizing your application</a></li>
<li class="toctree-l1"><a class="reference internal" href="UnicodeTips.html">Tips for Using Non-ASCII Characters in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scheduler.html">Scheduling Tasks with TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="ErrorReporting.html">Custom Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="ZeroConfSupport.html">Zeroconf support in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="StartupHook.html">Startup Hook</a></li>
<li class="toctree-l1"><a class="reference internal" href="CRUDTemplate.html">CRUD Template</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESTfulPath.html">RESTful URLs with TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESTfulPaginate.html">RESTful Pagination Using the Paginate Decorator</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebServices.html">WebServices with TGWebServices</a></li>
<li class="toctree-l1"><a class="reference internal" href="OAuthAuthentication.html">Validating Signed Requests from OpenSocial Applications</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Generating Graphs and Figures in TurboGears</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#server-side">Server Side</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generating-graphs-with-matplotlib">Generating Graphs with matplotlib</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-graphs-with-pylab">Generating Graphs with pylab</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#client-side">Client Side</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#with-javascript-library-plotkit">With Javascript library: PlotKit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#with-flash-xml-xml-swf-charts">With Flash &amp; XML : XML/SWF Charts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="FileUploadTutorial.html">File Upload Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileUploadProgressBar.html">File Upload Progress Bar</a></li>
<li class="toctree-l1"><a class="reference internal" href="AlternativeComponents.html">Alternative Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/UseElixir.html">Getting Started with Elixir</a></li>
<li class="toctree-l1"><a class="reference internal" href="RoutesIntegration.html">Using Routes with TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="EntryPointList.html">TurboGears Entry Point list</a></li>
<li class="toctree-l1"><a class="reference internal" href="MakingYourAppExtensible.html">Making Extensible Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="TurboGearsAndMicroApps.html">What does this have to do with TurboGears?</a></li>
<li class="toctree-l1"><a class="reference internal" href="TurboGearsAndMicroApps.html#an-example-is-worth-a-thousand-pages-worth-of-blather">An example is worth a thousand pages worth of blather</a></li>
<li class="toctree-l1"><a class="reference internal" href="TurboGearsAndMicroApps.html#now-for-the-bad-news">Now for the bad news</a></li>
<li class="toctree-l1"><a class="reference internal" href="UsingSphinx.html">Using Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="CookieDefault.html">Cookie Default</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConvertCookies.html">Converting Between Cookie Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="ExtraRequestParams.html">Handling Extra Request Parameters With CherryPy Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="RouteByHttpMethod.html">Routing Requests According to HTTP Request Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="VirtualHost.html">Virtual Host</a></li>
<li class="toctree-l1"><a class="reference internal" href="GenshiRenderingWithoutExpose.html">Genshi Rendering without using &#64;expose()</a></li>
<li class="toctree-l1"><a class="reference internal" href="ServeDynamicFiles.html">Serving Dynamically Generated Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="HybridNestedSetModel.html">Hybrid Nested Set Model for Hierarchical Storage of SQLObject Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="SockFile.html">Connecting to MySQL via a socket file</a></li>
<li class="toctree-l1"><a class="reference internal" href="SelectingOption.html">Setting the selected option of a SELECT element</a></li>
<li class="toctree-l1"><a class="reference internal" href="DojoIEWorkaround.html">Dojo / IE workaround</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Philosophy.html">TurboGears Project Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="Plugins.html">TurboGears Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="TemplatePlugins.html">Writing a Template Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="CommandPlugins.html"><tt class="docutils literal"><span class="pre">tg-admin</span></tt> Command Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="ExtendingQuickstart.html">Extending Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">TurboGears Licenses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ThirdParty.html">ThirdParty Components Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ChangeLog.html">TurboGears Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TGBooks.html">TurboGears Books</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TGArticles.html">TuboGears Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="PresentationMaterial.html">TurboGears presentation material</a></li>
</ul>

        </div>
      </div>


    <div class="document">
  <div class="documentwrapper">
    <div class="body headerfix">
      
  <div class="section" id="generating-graphs-and-figures-in-turbogears">
<span id="index-0"></span><h1><a class="toc-backref" href="#id1">Generating Graphs and Figures in TurboGears</a><a class="headerlink" href="#generating-graphs-and-figures-in-turbogears" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#generating-graphs-and-figures-in-turbogears" id="id1">Generating Graphs and Figures in TurboGears</a><ul>
<li><a class="reference internal" href="#server-side" id="id2">Server Side</a></li>
<li><a class="reference internal" href="#client-side" id="id3">Client Side</a></li>
</ul>
</li>
</ul>
</div>
<p>In TurboGears you can generate graphs and figures with Python modules
on the server side or with Javascript or Flash on the client side.</p>
<div class="section" id="server-side">
<h2><a class="toc-backref" href="#id2">Server Side</a><a class="headerlink" href="#server-side" title="Permalink to this headline">¶</a></h2>
<p>The page <a class="reference internal" href="ServeDynamicFiles.html"><em>ServeDynamicImage</em></a> has a short example showing how to serve a dynamically generated image with TurboGears in general. In the following, we list some options for generating such images.</p>
<div class="section" id="generating-graphs-with-matplotlib">
<span id="index-1"></span><h3>Generating Graphs with matplotlib<a class="headerlink" href="#generating-graphs-with-matplotlib" title="Permalink to this headline">¶</a></h3>
<p>Homepage: <a class="reference external" href="http://matplotlib.sourceforge.net/">http://matplotlib.sourceforge.net/</a></p>
<p>The following decorator exposes individual figures as separate pages.  Each
figure is rendered as a PNG image:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">StringIO</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">numpy</span>


<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_agg</span> <span class="kn">import</span> <span class="n">FigureCanvasAgg</span>
<span class="kn">from</span> <span class="nn">turbogears</span> <span class="kn">import</span> <span class="n">expose</span>


<span class="k">def</span> <span class="nf">expose_matplot_figure</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">render_opts</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Decorator which exposes and renders a matplotlib Figure.</span>

<span class="sd">    Usage:</span>

<span class="sd">    def sample_fig(self):</span>
<span class="sd">        fig = matplotlib.figure.Figure(figsize=(9, 6))</span>
<span class="sd">        fig.Name = &quot;Sinewave&quot;</span>
<span class="sd">        ax = fig.add_subplot(111)</span>
<span class="sd">        ax.set_xlabel(&quot;angle&quot;)</span>
<span class="sd">        ax.set_ylabel(&quot;amplitude&quot;)</span>
<span class="sd">        t = arange(0.0, 2.0, 0.01)</span>
<span class="sd">        s1 = sin(2*pi*t)</span>
<span class="sd">        ax.plot(t, s1, color=&quot;k&quot;)</span>
<span class="sd">        return fig</span>

<span class="sd">    @expose_matplot_figure</span>
<span class="sd">    def sinegraph_default_dpi(self):</span>
<span class="sd">        return self.sample_fig()</span>

<span class="sd">    ...same thing using a dict...</span>

<span class="sd">    @expose_matplot_figure</span>
<span class="sd">    def sinegraph_default_dpi_using_dict(self):</span>
<span class="sd">        return dict(fig=self.sample_fig())</span>

<span class="sd">    @expose_matplot_figure(dpi=20)</span>
<span class="sd">    def sinegraph_20dpi(self):</span>
<span class="sd">        return self.sample_fig()</span>

<span class="sd">    @expose_matplot_figure</span>
<span class="sd">    def sinegraph_32dpi(self):</span>
<span class="sd">        return dict(fig=self.sample_fig(), dpi=32)</span>

<span class="sd">    @expose_pylab_figure(dpi=72)</span>
<span class="sd">    def sinegraph_results_dict_overrides_decorator(self):</span>
<span class="sd">        return dict(fig=self.sample_fig(), dpi=32)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_fig</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s">&#39;fig&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">result</span><span class="p">[</span><span class="s">&#39;fig&#39;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">fig</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_render_opts</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">render_opts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">render_opts</span>

    <span class="k">def</span> <span class="nf">wrap_f_with_render_figure</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">render_figure</span><span class="p">(</span><span class="o">*</span><span class="n">pargs</span><span class="p">,</span> <span class="o">**</span><span class="n">vargs</span><span class="p">):</span>
            <span class="c"># Make the PNG</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">pargs</span><span class="p">,</span> <span class="o">**</span><span class="n">vargs</span><span class="p">)</span>
            <span class="n">canvas</span> <span class="o">=</span> <span class="n">FigureCanvasAgg</span><span class="p">(</span><span class="n">get_fig</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
            <span class="n">rendered_fig</span> <span class="o">=</span> <span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
            <span class="n">canvas</span><span class="o">.</span><span class="n">print_figure</span><span class="p">(</span><span class="n">rendered_fig</span><span class="p">,</span> <span class="o">**</span><span class="n">get_render_opts</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">rendered_fig</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">expose</span><span class="p">(</span><span class="n">content_type</span><span class="o">=</span><span class="s">&quot;image/png&quot;</span><span class="p">)(</span><span class="n">render_figure</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">f</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c"># This corresponds to the usage @expose_matplotlib_figure(dpi=20)</span>
        <span class="k">return</span> <span class="n">wrap_f_with_render_figure</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># This corresponds to the usage @expose_matplotlib_figure</span>
        <span class="k">return</span> <span class="n">wrap_f_with_render_figure</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="generating-graphs-with-pylab">
<span id="index-2"></span><h3>Generating Graphs with pylab<a class="headerlink" href="#generating-graphs-with-pylab" title="Permalink to this headline">¶</a></h3>
<p>The following decorator displays pylab graphs:</p>
<div class="highlight-python"><pre>import StringIO
from threading import RLock()

import pylab
from turbogears import expose

pylab_lock = RLock()


def expose_pylab_figure(f=None, **render_opts):
    """"Decorator which exposes and renders a pylab graph.

    Warning:

    Unfortunately pylab is not (as far as I know) thread safe
    as it works with an implicit figure.  Therefore the image
    rendering code must be gated with a lock.

    This will have no real effect if you're using a process oriented
    server, but it may do bad things to TurboGears if you're using
    a threading server.

    Usage:

    @expose_pylab_figure
    def simple_plot():
        plot([1, 2, 3])

    @expose_pylab_figure(dpi=20)
    def simple_plot_20dpi():
        plot([1, 2, 3])

    @expose_pylab_figure
    def simple_plot_32dpi():
        plot([1, 2, 3])
        return dict(dpi=32)

    @expose_pylab_figure(dpi=72)
    def simple_plot_results_dict_overrides_decorator(self):
        plot([1, 2, 3])
        return dict(dpi=32)

    """

    def get_render_opts(result):
        if result is not None:
            render_opts.update(result)
        return render_opts

    def wrap_f_with_render_figure(f):
        def render_figure(*pargs, **vargs):
            pylab_lock.acquire()
            try:
                result = f(*pargs, **vargs)
                rendered_figure = StringIO.StringIO()
                pylab.savefig(rendered_figure, **get_render_opts(result))
                pylab.close('all')
                return rendered_figure.getvalue()
            finally:
                pylab_lock.release()
        return expose(content_type="image/png")(render_figure)

    if f is None:
        # This corresponds to the usage @expose_pylab_figure(dpi=20)
        return wrap_f_with_render_figure
    else:
        # This corresponds to the usage @expose_pylab_figure
        return wrap_f_with_render_figure(f)</pre>
</div>
</div>
</div>
<div class="section" id="client-side">
<h2><a class="toc-backref" href="#id3">Client Side</a><a class="headerlink" href="#client-side" title="Permalink to this headline">¶</a></h2>
<div class="section" id="with-javascript-library-plotkit">
<span id="index-3"></span><h3>With Javascript library: PlotKit<a class="headerlink" href="#with-javascript-library-plotkit" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://www.liquidx.net/plotkit/">http://www.liquidx.net/plotkit/</a></li>
<li><a class="reference external" href="http://www.python.org/pypi/PlotKit/">http://www.python.org/pypi/PlotKit/</a></li>
</ul>
<p>Install with:</p>
<div class="highlight-python"><pre>$ [sudo] easy_install PlotKit</pre>
</div>
<p>Here&#8217;s a simple usage example.</p>
<p>In <tt class="docutils literal"><span class="pre">controllers.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">plotkit</span> <span class="kn">import</span> <span class="n">EasyPlot</span>

<span class="k">class</span> <span class="nc">Root</span><span class="p">(</span><span class="n">controllers</span><span class="o">.</span><span class="n">RootController</span><span class="p">):</span>
    <span class="nd">@expose</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s">&quot;wgtest.templates.welcome&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">setA</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]]</span>
        <span class="n">setB</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">20</span><span class="p">]]</span>
        <span class="n">setC</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">ep</span><span class="o">=</span> <span class="n">EasyPlot</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">&quot;diag&quot;</span><span class="p">,</span>
                 <span class="n">style</span><span class="o">=</span><span class="s">&quot;line&quot;</span><span class="p">,</span>
                 <span class="n">width</span><span class="o">=</span><span class="s">&quot;300&quot;</span><span class="p">,</span>
                 <span class="n">height</span><span class="o">=</span><span class="s">&quot;300&quot;</span><span class="p">,</span>
                 <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">setA</span><span class="p">,</span> <span class="n">setB</span><span class="p">,</span> <span class="n">setC</span><span class="p">]))</span>
</pre></div>
</div>
<p>In <tt class="docutils literal"><span class="pre">welcome.kid</span></tt>, simply add</p>
<div class="highlight-python"><pre>${ep.display()}</pre>
</div>
<p>into the HTML BODY element.</p>
<p>You can download the <a class="reference download internal" href="_downloads/wgtest.tar.gz"><tt class="xref download docutils literal"><span class="pre">example</span> <span class="pre">code</span></tt></a> here.</p>
</div>
<div class="section" id="with-flash-xml-xml-swf-charts">
<span id="index-4"></span><h3>With Flash &amp; XML : XML/SWF Charts<a class="headerlink" href="#with-flash-xml-xml-swf-charts" title="Permalink to this headline">¶</a></h3>
<p>XML/SWF Charts is an SWF (Flash) client side plotting API. Xou can feed xml
data to XML/SWF Charts and it will plot for you.</p>
<ul class="simple">
<li><a class="reference external" href="http://www.maani.us/xml_charts/">http://www.maani.us/xml_charts/</a></li>
<li><a class="reference external" href="http://www.maani.us/xml_charts/index.php?menu=Gallery">http://www.maani.us/xml_charts/index.php?menu=Gallery</a></li>
</ul>
<p>Download it, extract <tt class="docutils literal"><span class="pre">charts.swf</span></tt> and the <tt class="docutils literal"><span class="pre">/charts_library</span></tt> folder into
your project&#8217;s <tt class="docutils literal"><span class="pre">static</span></tt> folder.</p>
<p>There are some tricks to use XML/SWF Charts with kid templates. Here&#8217;s what
you&#8217;d put into the HTML BODY element to insert the Flash object. Put this into
a template called <tt class="docutils literal"><span class="pre">plot.kid</span></tt>:</p>
<div class="highlight-python"><pre>&lt;OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
  codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"
    WIDTH="400"
    HEIGHT="250"
    id="charts"
    ALIGN=""&gt;
  &lt;PARAM NAME="movie"
  VALUE="static/charts.swf?library_path=static/charts_library&amp;amp;xml_source=${data}" /&gt;
  &lt;PARAM NAME="quality" VALUE="high" /&gt;
  &lt;PARAM NAME="bgcolor" VALUE="#666666" /&gt;

  &lt;EMBED src="static/charts.swf?library_path=static/charts_library&amp;amp;xml_source=${data}"
    quality="high"
    bgcolor="#666666"
    WIDTH="400"
    HEIGHT="250"
    NAME="charts"
    ALIGN=""
    swLiveConnect="true"
    TYPE="application/x-shockwave-flash"
    PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"&gt;
  &lt;/EMBED&gt;
&lt;/OBJECT&gt;</pre>
</div>
<p>Here&#8217;s the controller method, which displays the page with the XML/SQF Chart Flash object. Add this in <tt class="docutils literal"><span class="pre">controller.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@expose</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s">&quot;.templates.plot&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c"># return url: /data</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s">&quot;data&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And here&#8217;s an example controller method, which delivers the chart data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@expose</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="n">template</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s">      &lt;chart&gt;</span>
<span class="s">          &lt;chart_type&gt;column&lt;/chart_type&gt;</span>
<span class="s">          &lt;chart_data&gt;</span>
<span class="s">          &lt;row&gt;</span>
<span class="s">           &lt;null/&gt;</span>
<span class="s">           &lt;string&gt;2001&lt;/string&gt;</span>
<span class="s">           &lt;string&gt;2002&lt;/string&gt;</span>
<span class="s">           &lt;string&gt;2003&lt;/string&gt;</span>
<span class="s">           &lt;string&gt;2004&lt;/string&gt;</span>
<span class="s">          &lt;/row&gt;</span>
<span class="s">          &lt;row&gt;</span>
<span class="s">           &lt;string&gt;Region A&lt;/string&gt;</span>
<span class="s">           &lt;number&gt;5&lt;/number&gt;</span>
<span class="s">           &lt;number&gt;10&lt;/number&gt;</span>
<span class="s">           &lt;number&gt;30&lt;/number&gt;</span>
<span class="s">           &lt;number&gt;63&lt;/number&gt;</span>
<span class="s">          &lt;/row&gt;</span>
<span class="s">          &lt;row&gt;</span>
<span class="s">           &lt;string&gt;Region B&lt;/string&gt;</span>
<span class="s">           &lt;number&gt;100&lt;/number&gt;</span>
<span class="s">           &lt;number&gt;20&lt;/number&gt;</span>
<span class="s">           &lt;number&gt;65&lt;/number&gt;</span>
<span class="s">           &lt;number&gt;55&lt;/number&gt;</span>
<span class="s">          &lt;/row&gt;</span>
<span class="s">          &lt;row&gt;</span>
<span class="s">           &lt;string&gt;Region C&lt;/string&gt;</span>
<span class="s">           &lt;number&gt;56&lt;/number&gt;</span>
<span class="s">           &lt;number&gt;21&lt;/number&gt;</span>
<span class="s">           &lt;number&gt;5&lt;/number&gt;</span>
<span class="s">           &lt;number&gt;90&lt;/number&gt;</span>
<span class="s">          &lt;/row&gt;</span>
<span class="s">          &lt;/chart_data&gt;</span>
<span class="s">      &lt;/chart&gt;</span>
<span class="s">      &quot;&quot;&quot;</span>
      <span class="k">return</span> <span class="n">template</span>
</pre></div>
</div>
</div>
</div>
</div>


    </div>
  </div>
      <div class="clearer"></div>
    </div>
  <div class="footer"><span>
      &copy; Copyright 
      by the <a href="">TurboGears</a> Doc Team.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
  </span></div>
  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-7088080-2");
  pageTracker._trackPageview();
  } catch(err) {}</script>
  </body>
</html>