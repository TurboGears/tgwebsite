
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The 20 Minutes Wiki &mdash; TurboGears 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/tg.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/header.js"></script>
    <link rel="top" title="TurboGears 1.0 documentation" href="../index.html" />
    <link rel="next" title="20 Minute Wiki Page 2" href="Page2.html" />
    <link rel="prev" title="TurboGears Screencasts" href="../TGScreencasts.html" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Page2.html" title="20 Minute Wiki Page 2"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../TGScreencasts.html" title="TurboGears Screencasts"
             accesskey="P">previous</a> |</li>
<li><a href="../index.html">TurboGears 1.0 documentation</a> &raquo;</li>
<li id="searchbox" style="display: none; margin: 0 20px;" class="right">
  <form class="search" action="../search.html" method="get">
    <span>Search:</span>
    <input type="text" name="q" size="18" />
    <input type="submit" value="Go" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</li>
<script type="text/javascript">$('#searchbox').show(0);</script>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The 20 Minutes Wiki</a><ul>
<li><a class="reference internal" href="#table-of-contents">Table of Contents</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#setting-up">Setting Up</a></li>
<li><a class="reference internal" href="#the-quickstart">The Quickstart</a></li>
<li><a class="reference internal" href="#now-serving-number-1">Now Serving: Number 1</a></li>
<li><a class="reference internal" href="#that-was-easy">That was easy!</a></li>
<li><a class="reference internal" href="#let-s-make-a-wiki">Let&#8217;s make a wiki!</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../TGScreencasts.html"
                        title="previous chapter">TurboGears Screencasts</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Page2.html"
                        title="next chapter">20 Minute Wiki Page 2</a></p>
        </div>
      </div>


    <div class="document">
  <div class="documentwrapper">
    <div class="body headerfix">
      
  <div class="section" id="the-20-minutes-wiki">
<span id="index-0"></span><h1>The 20 Minutes Wiki<a class="headerlink" href="#the-20-minutes-wiki" title="Permalink to this headline">¶</a></h1>
<p>This tutorial is also available as a <a class="reference external" href="http://www.turbogears.org/videos/20MinuteWiki2nd.mov">screencast</a>. The video moves quite
quickly to demo TurboGears and hold your interest, but a number of new users
have reported having difficulty following certain parts. This tutorial
initially was a direct translation of the video, but has been rewritten
to be a gentler introduction.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This tutorial refers to TurboGears 1.0 which is outdated and
no longer the recommended version to start with. If you are new to
TurboGears, we recommend starting with the latest version of the
TurboGears 2 branch based on Pylons. If you still want to use the older
TurboGears 1 branch based on CherryPy, we recommend using its latest
version TurboGears 1.5. The <a class="reference external" href="http://www.turbogears.org">TurboGears</a> homepage has links to the
documentation and tutorials for these versions.</p>
</div>
<p>We recommend creating the code for this tutorial on your own, as you
follow each step of the tutorial. But you can also download the
<a class="reference download internal" href="../_downloads/wiki20-1.0.1.zip"><tt class="xref download docutils literal"><span class="pre">final</span> <span class="pre">code</span></tt></a> for this tutorial
if you want to spare some typing or you&#8217;re getting stuck somewhere.</p>
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
<ul class="simple">
<li>Page 1: Setup and Startup</li>
<li><a class="reference internal" href="Page2.html"><em>Page 2: Database Setup and Page Display</em></a></li>
<li><a class="reference internal" href="Page3.html"><em>Page 3: Page Editing and Saving</em></a></li>
<li><a class="reference internal" href="Page4.html"><em>Page 4: URL Handling, WikiWords, Missing Pages</em></a></li>
<li><a class="reference internal" href="Page5.html"><em>Page 5: Adding a page list</em></a></li>
<li><a class="reference internal" href="Page6.html"><em>Page 6: AJAXification and Conclusion</em></a></li>
</ul>
</div>
<div class="section" id="setting-up">
<h2>Setting Up<a class="headerlink" href="#setting-up" title="Permalink to this headline">¶</a></h2>
<p>To go through this tutorial, you&#8217;ll want:</p>
<ol class="arabic" start="0">
<li><p class="first">TurboGears 1.0 or higher. ;-]</p>
</li>
<li><p class="first"><a class="reference external" href="http://cheeseshop.python.org/pypi/docutils">docutils</a> 0.4 or later, which is used for the wiki&#8217;s formatting. docutils is
not a required part of TurboGears but is needed for this tutorial. Install
it with:</p>
<div class="highlight-python"><pre>easy_install docutils</pre>
</div>
</li>
<li><p class="first">A web browser</p>
</li>
<li><p class="first">Your favorite editor</p>
</li>
<li><p class="first">Two command line windows (you only <em>need</em> one, but two is nicer.)</p>
</li>
<li><p class="first">A database. If you don&#8217;t have one, your best bet is sqlite 3.2+ with
<a class="reference external" href="http://cheeseshop.python.org/pypi/pysqlite">pysqlite</a> 2.0+. Again, install it with:</p>
<div class="highlight-python"><pre>easy_install pysqlite</pre>
</div>
</li>
</ol>
<ol class="arabic simple" start="6">
<li><em>optional</em> If you&#8217;re not aware of it, you may also find the <a class="reference external" href="http://ipython.scipy.org/">ipython shell</a>
to be helpful. It supports attribute tab completion for many objects (which
can help you find the method you&#8217;re searching for) and can display contextual
help if you append a question mark onto the end of an object or method. You
can do the same in the standard shell with the <tt class="docutils literal"><span class="pre">dir()</span></tt> and <tt class="docutils literal"><span class="pre">help()</span></tt>
functions, but ipython is more convenient. ipython has a number of other
convenient features (like dropping into the debugger on error), check the
ipython docs or online help.</li>
</ol>
<p>This tutorial doesn&#8217;t cover Python at all. Check the <a class="reference external" href="http://python.org/">Python homepage</a>
page for more coverage of Python.</p>
</div>
<div class="section" id="the-quickstart">
<h2>The Quickstart<a class="headerlink" href="#the-quickstart" title="Permalink to this headline">¶</a></h2>
<p>TurboGears has a command line tool named <tt class="docutils literal"><span class="pre">tg-admin</span></tt>, which provides a suite of
tools for working with TurboGears projects. A few will be touched upon in this
tutorial, check the <a class="reference internal" href="../TgAdmin.html"><em>tg-admin reference</em></a> for a full listing.
The first tool you&#8217;ll need is <tt class="docutils literal"><span class="pre">quickstart</span></tt>, which initializes a TurboGears project.
Go to one of your command line windows and run the following command:</p>
<div class="highlight-python"><pre>tg-admin quickstart</pre>
</div>
<p>You&#8217;ll be prompted for the name of the project (this is the pretty name that
human beings would appreciate), and the name of the package (this is the
less-pretty name that Python will like). For the identity prompt, answer &#8216;no&#8217;,
since we&#8217;ll keep this wiki fairly simple, but when you need users/passwords
in a future project, you&#8217;ll want to look up the <a class="reference internal" href="../Identity/index.html"><em>identity management</em></a> tutorial. Here&#8217;s what our choices for this tutorial look like:</p>
<div class="highlight-python"><pre>Enter project name: Wiki 20
Enter package name [wiki20]: wiki20
Do you need Identity (usernames/passwords) in this project? [no] no
...output...</pre>
</div>
<p>This creates a few files in a directory tree just below your current
directory. Let&#8217;s go in there and you can take a look around:</p>
<div class="highlight-python"><pre>cd Wiki-20</pre>
</div>
</div>
<div class="section" id="now-serving-number-1">
<h2>Now Serving: Number 1<a class="headerlink" href="#now-serving-number-1" title="Permalink to this headline">¶</a></h2>
<p>You may have spotted a file called <tt class="docutils literal"><span class="pre">start-wiki20.py</span></tt>. This script starts the
built-in web server. Let&#8217;s run it! Go to your second command line window and run:</p>
<div class="highlight-python"><pre>python start-wiki20.py</pre>
</div>
<p>Point your browser at <a class="reference external" href="http://localhost:8080/">http://localhost:8080/</a>, and you&#8217;ll see a nice little
welcome page with the current time. (If you&#8217;re on a Mac and have Bonjour
bookmarks turned on in Safari, you&#8217;ll see your new server show up there!)</p>
</div>
<div class="section" id="that-was-easy">
<h2>That was easy!<a class="headerlink" href="#that-was-easy" title="Permalink to this headline">¶</a></h2>
<p>Easy indeed. You have a working project! If you take a look at the code that
<tt class="docutils literal"><span class="pre">quickstart</span></tt> created, you&#8217;ll see that there isn&#8217;t much involved in getting up
and running. In particular, you&#8217;ll want to check out the two files directly
involved in displaying this welcome page:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">wiki20/controllers.py</span></tt> has the code that&#8217;s generating the welcome page.
CherryPy (TurboGears&#8217; controller/app server) works using object publishing.
You write methods and <tt class="docutils literal"><span class="pre">&#64;expose()</span></tt> them to the web.</p>
<p>TurboGears adds template processing to the default CherryPy decorator, you
just specify your template, return a dictionary, and TG takes care of the
rest. This has a number of advantages over returning some sort of string
object, which we&#8217;ll get to later in this tutorial.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">wiki20/templates/welcome.kid</span></tt> is the template you view on the welcome
screen. Did you notice that it&#8217;s standard XHTML with some simple namespaced
attributes? Very designer-friendly. You can even open it directly in your
browser!</p>
<p>If you really love another templating engine, there are <a class="reference external" href="http://www.turbogears.org/cogbin/">plugins
available</a> for most popular Python templating engines. See the <a class="reference internal" href="../AlternativeTemplating.html"><em>using
alternate templating engines</em></a> article for details.</p>
</li>
</ul>
</div>
<div class="section" id="let-s-make-a-wiki">
<h2>Let&#8217;s make a wiki!<a class="headerlink" href="#let-s-make-a-wiki" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re not familiar with a wiki, you might want to check out
<a class="reference external" href="http://en.wikipedia.org/wiki/Wiki">the Wikipedia entry</a>. The whole idea is
that it&#8217;s an easily-editable collaborative web content system that makes it
trivial to link to pages and create new pages.</p>
<p>TurboGears follows the <a class="reference external" href="http://en.wikipedia.org/wiki/Model-view-controller">Model-View-Controller paradigm</a>, as do most modern web
frameworks. Kid templates are your view, your CherryPy classes are your
controllers and basically any object <em>can</em> be your model. In practice, since
we&#8217;re in a database-driven world, your model will be based on a relational
database. SQLObject makes working with databases easy.</p>
<p>TurboGears quickstart gave us a <tt class="docutils literal"><span class="pre">wiki20/model.py</span></tt> module with enough in it to
start creating model classes. Since a wiki is basically a linked collection of
pages, we&#8217;ll define a <tt class="docutils literal"><span class="pre">Page</span></tt> class as the name of our model. Here&#8217;s what it
looks like, you&#8217;ll want to append it at the end of your <tt class="docutils literal"><span class="pre">wiki20/model.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Page</span><span class="p">(</span><span class="n">SQLObject</span><span class="p">):</span>
    <span class="n">pagename</span> <span class="o">=</span> <span class="n">UnicodeCol</span><span class="p">(</span><span class="n">alternateID</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">UnicodeCol</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>Firebird database users</strong>,
<tt class="docutils literal"><span class="pre">page</span></tt> is a reserved word in Firebird&#8217;s SQL. To work around this, you&#8217;ll
need to explicitly define the name of your <tt class="docutils literal"><span class="pre">Page</span></tt> class&#8217; table:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="c">#Firebird users only:</span>
<span class="k">class</span> <span class="nc">Page</span><span class="p">(</span><span class="n">SQLObject</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">sqlmeta</span><span class="p">:</span>
        <span class="n">table</span> <span class="o">=</span> <span class="s">&quot;tg_page&quot;</span>
    <span class="n">pagename</span> <span class="o">=</span> <span class="n">UnicodeCol</span><span class="p">(</span><span class="n">alternateID</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">UnicodeCol</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Most TurboGears developers and users prefer to work with objects (and not SQL)
as much as possible. SQLObject <em>does</em> support creating objects based on the
database definition, but if you work the other way and create the database
definition based on the objects, your database information lives in one place and
your table-declarations are database independent.</p>
<p>For the <tt class="docutils literal"><span class="pre">pagename</span></tt>, we specified <tt class="docutils literal"><span class="pre">alternateID=True</span></tt>, which will guarantee
that the column is unique and allow us to select a <tt class="docutils literal"><span class="pre">Page</span></tt> from our model using
its <tt class="docutils literal"><span class="pre">pagename</span></tt> rather than having to do so by its&#8217; (automatically created)
<tt class="docutils literal"><span class="pre">id</span></tt> <a class="reference external" href="http://en.wikipedia.org/wiki/Primary_key">(surrogate) primary key</a>. Some databases require the length to be
specified on indexed columns, so we&#8217;ll just use the arbitrary length of 30 here
to prevent potential problems.</p>
<p><a class="reference internal" href="Page2.html"><em>Continue on to page 2</em></a></p>
</div>
</div>


    </div>
  </div>
      <div class="clearer"></div>
    </div>
  <div class="footer"><span>
      &copy; Copyright 
      by the <a href="">TurboGears</a> Doc Team.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
  </span></div>
  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-7088080-2");
  pageTracker._trackPageview();
  } catch(err) {}</script>
  </body>
</html>