
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Error Handling &mdash; TurboGears 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/tg.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <script type="text/javascript" src="_static/header.js"></script>
    <link rel="top" title="TurboGears 1.0 documentation" href="index.html" />
    <link rel="next" title="How does error handling work?" href="HowDoesErrorHandlingWork.html" />
    <link rel="prev" title="@validate()" href="ValidateDecorator.html" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="HowDoesErrorHandlingWork.html" title="How does error handling work?"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ValidateDecorator.html" title="@validate()"
             accesskey="P">previous</a> |</li>
<li><a href="index.html">TurboGears 1.0 documentation</a> &raquo;</li>
<li id="searchbox" style="display: none; margin: 0 20px;" class="right">
  <form class="search" action="search.html" method="get">
    <span>Search:</span>
    <input type="text" name="q" size="18" />
    <input type="submit" value="Go" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</li>
<script type="text/javascript">$('#searchbox').show(0);</script>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">TurboGears 1.0 FAQ</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Install/index.html">Downloading and Installing TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Install/Deployment.html">Deploying TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Database/index.html">Database Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/BigPicture.html">The Big Picture</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TGScreencasts.html">TurboGears Screencasts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Wiki20/Page1.html">The 20 Minutes Wiki</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Controller.html">Controller Getting Started Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Arguments.html">I Wanted An Argument!</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/UseDatabase.html">Data Model Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Kid.html">A Brief Introduction to Kid Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/MochiKit.html">A Brief Introduction to MochiKit</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Identity/GettingStarted.html">Getting Started With Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Introduction.html">Introduction To Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/SimpleForm.html">Simple Widget Form Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileUploadTutorial.html">File Upload Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ToDoListTutorial.html">Brian&#8217;s TurboGears Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TgAdmin.html">tg-admin command line tool reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="QuickStart.html">Are you ready to gear up?</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Server.html">Starting Up The Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration.html">TurboGears Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingBigApplications.html">Creating Big Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="SpecificProblems.html">Solving specific problems</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/Arguments.html">I Wanted An Argument!</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/URLs.html">Using URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingBigApplications.html">Creating Big Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="RequestResponse.html">Access Request/Response Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="StaticFiles.html">Serving Static Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cookies.html">Using Cookies in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sessions.html">Using Sessions in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="FeedController.html">Serving RSS and Atom feeds</a></li>
<li class="toctree-l1"><a class="reference internal" href="UnifiedControllers.html">Unified Form Data Validation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ExposeDecorator.html">&#64;expose()</a></li>
<li class="toctree-l1"><a class="reference internal" href="ValidateDecorator.html">&#64;validate()</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Error Handling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#validation-errors">Validation Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-does-it-work">How Does it Work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-error-handler-with-widgets-forms">Using <tt class="docutils literal"><span class="pre">error_handler</span></tt> with Widgets Forms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-current-form-values">Accessing Current Form Values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exceptions-and-rules">Exceptions and Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#important-hints">Important Hints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-2-3-compatibility">Python 2.3 Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decorator-order">Decorator Order</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#further-reading">Further reading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="HowDoesErrorHandlingWork.html">How does error handling work?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Identity/Usage.html">Using Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="PaginateDecorator.html">&#64;paginate()</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="StdVars.html"><tt class="docutils literal"><span class="pre">stdvars</span></tt>: Global Template Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="HeadersFooters.html">Application-wide Headers and Footers</a></li>
<li class="toctree-l1"><a class="reference internal" href="JSON.html">JSON Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="Designer.html">Designer-Friendly Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="DummyTemplate.html">Dummy Kid Template for Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="KidHTMLEntities.html">HTML Entities in Kid templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="CheckedCheckBox.html">Automatically Checking a Checkbox or Radio Button</a></li>
<li class="toctree-l1"><a class="reference internal" href="BreadCrumb.html">Breadcrumb Style Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="CreatingBigApplications.html">Creating Big Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="NonPackagedKidTemplates.html">Loading Kid templates from outside your application package</a></li>
<li class="toctree-l1"><a class="reference internal" href="GenshiInternationalizationWithBabel.html">Genshi Templates Internationalization with Babel</a></li>
<li class="toctree-l1"><a class="reference internal" href="AdvancedCheetahTemplates.html">Templates for using TurboCheetah with TurboGears</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/DefineDatabase.html">Data Model Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="BackEndOverview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="BackEndOverview.html#supported-backends">Supported backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="DbUri.html">The DB-URI</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/index.html">SQLObject Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="TgAdminSqlUpgrade.html">How to Use <tt class="docutils literal"><span class="pre">tgadmin</span> <span class="pre">sql</span> <span class="pre">upgrade</span></tt> with SQLObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelOutsideTG.html">Using Your Model Outside of TurboGears Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="MultipleDatabases.html">Using Multiple Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/AutoUpdateField.html">Auto-updating an attribute with SQLObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Debug.html">SQLObject Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/DirectSQL.html">SQLObject direct SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/ForeignKeys.html">SQLObject Foreign Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/QuickGuide.html">SQLObject Quick Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/ReservedWords.html">Avoiding SQL reserved words in the model definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Caching.html">SQLObject Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Gotchas.html">SQLObject &#8220;gotcha&#8217;s&#8221;</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/StoringAndRetrievingFiles.html">Storing and Retrieving Files from a Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Views.html">Views in SQLObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/VsHibernate.html">Hibernate vs SqlObject</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLAlchemy/Configuration.html">SQLAlchemy Configuration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Overview.html">Widgets Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/index.html">Guide to the TurboGears Widgets Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Browser.html">WidgetBrowser</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Explore.html">Dive Into Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/SimpleForm.html">Simple Widget Form Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/FormValidationWithSchemas.html">Widget Form Validation with Schemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/ModifyDefaults.html">Changing Widget Defaults at Run Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/DynamicForm.html">Dynamically Modifying a Form&#8217;s Widgets With Ajax</a></li>
<li class="toctree-l1"><a class="reference internal" href="DynamicValidation.html">Dynamic Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Packages.html">Widget Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/StatelessWidgets.html">StatelessWidgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/DataGrid.html">DataGrid</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/AjaxGrid.html">Ajax Grid Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/AutoCompleteField.html">The AutoCompleteField Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/RemoteForm.html">RemoteForm Widget Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/RemoteLink.html">Wrap Ajax Operations in Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/CompoundWidgets.html">Implementing and using CompoundWidgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/RepeatingFieldSet.html">RepeatingFieldSet Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/CalendarDatePicker.html">CalendarDatePicker Widget</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/NicerForms.html">Nicer Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="FastData/index.html">FastData</a></li>
<li class="toctree-l1"><a class="reference internal" href="FastData/DataController.html">DataController</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Recipes.html">Widget Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Tips.html">Widget Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="ToscaWidgets.html">Using ToscaWidgets in TurboGears 1.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Visit/index.html">Using the Visit Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visit/Extending.html">Extending the Visit Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visit/UserTrackedLogging.html">User Tracked Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Visit/PermanentLogin.html">Permanent Login</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/index.html">Identity Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/GettingStarted.html">Getting Started With Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/Usage.html">Using Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/EncryptedPassword.html">Using Identity with Encrypted Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/Recipes.html">Identity Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Identity/OpenID.html">OpenID Authentication with TurboGears Identity</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Testing.html">Testing Your Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="LoggingSystem.html">Understanding the Logging System</a></li>
<li class="toctree-l1"><a class="reference internal" href="ErrorReporting.html">Custom Error Reporting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Debugging.html">Debugging a TurboGears Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="DummyTemplate.html">Dummy Kid Template for Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQLObject/Debug.html">SQLObject Debugging</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Optimization.html">Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="CachingTechniques.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="GzipCompressing.html">Gzip Compressing Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="UsingPylint.html">Using Pylint to Improve the Quality of Your Code</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Toolbox.html">TurboGears Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="Admi18n.html">The Admi18n Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="Catwalk.html">CatWalk</a></li>
<li class="toctree-l1"><a class="reference internal" href="FastData/DataController.html">DataController</a></li>
<li class="toctree-l1"><a class="reference internal" href="VersionInfo.html">Toolbox Info</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelDesigner.html">ModelDesigner</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebConsole.html">Web Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="Widgets/Browser.html">WidgetBrowser</a></li>
<li class="toctree-l1"><a class="reference internal" href="DreamWeaverIntegration.html">DreamWeaver Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="VimIntegration.html">Vim Editor Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FlashNotes.html">Using Flash Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="JsonifyDecorator.html">The <tt class="docutils literal"><span class="pre">jsonify</span></tt> Decorator</a></li>
<li class="toctree-l1"><a class="reference internal" href="Internationalization.html">Internationalizing your application</a></li>
<li class="toctree-l1"><a class="reference internal" href="UnicodeTips.html">Tips for Using Non-ASCII Characters in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scheduler.html">Scheduling Tasks with TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="ErrorReporting.html">Custom Error Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="ZeroConfSupport.html">Zeroconf support in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="StartupHook.html">Startup Hook</a></li>
<li class="toctree-l1"><a class="reference internal" href="CRUDTemplate.html">CRUD Template</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESTfulPath.html">RESTful URLs with TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESTfulPaginate.html">RESTful Pagination Using the Paginate Decorator</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebServices.html">WebServices with TGWebServices</a></li>
<li class="toctree-l1"><a class="reference internal" href="OAuthAuthentication.html">Validating Signed Requests from OpenSocial Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="GenerateFigures.html">Generating Graphs and Figures in TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileUploadTutorial.html">File Upload Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileUploadProgressBar.html">File Upload Progress Bar</a></li>
<li class="toctree-l1"><a class="reference internal" href="AlternativeComponents.html">Alternative Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted/UseElixir.html">Getting Started with Elixir</a></li>
<li class="toctree-l1"><a class="reference internal" href="RoutesIntegration.html">Using Routes with TurboGears</a></li>
<li class="toctree-l1"><a class="reference internal" href="EntryPointList.html">TurboGears Entry Point list</a></li>
<li class="toctree-l1"><a class="reference internal" href="MakingYourAppExtensible.html">Making Extensible Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="TurboGearsAndMicroApps.html">What does this have to do with TurboGears?</a></li>
<li class="toctree-l1"><a class="reference internal" href="TurboGearsAndMicroApps.html#an-example-is-worth-a-thousand-pages-worth-of-blather">An example is worth a thousand pages worth of blather</a></li>
<li class="toctree-l1"><a class="reference internal" href="TurboGearsAndMicroApps.html#now-for-the-bad-news">Now for the bad news</a></li>
<li class="toctree-l1"><a class="reference internal" href="UsingSphinx.html">Using Sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="CookieDefault.html">Cookie Default</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConvertCookies.html">Converting Between Cookie Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="ExtraRequestParams.html">Handling Extra Request Parameters With CherryPy Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="RouteByHttpMethod.html">Routing Requests According to HTTP Request Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="VirtualHost.html">Virtual Host</a></li>
<li class="toctree-l1"><a class="reference internal" href="GenshiRenderingWithoutExpose.html">Genshi Rendering without using &#64;expose()</a></li>
<li class="toctree-l1"><a class="reference internal" href="ServeDynamicFiles.html">Serving Dynamically Generated Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="HybridNestedSetModel.html">Hybrid Nested Set Model for Hierarchical Storage of SQLObject Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="SockFile.html">Connecting to MySQL via a socket file</a></li>
<li class="toctree-l1"><a class="reference internal" href="SelectingOption.html">Setting the selected option of a SELECT element</a></li>
<li class="toctree-l1"><a class="reference internal" href="DojoIEWorkaround.html">Dojo / IE workaround</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Philosophy.html">TurboGears Project Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="Plugins.html">TurboGears Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="TemplatePlugins.html">Writing a Template Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="CommandPlugins.html"><tt class="docutils literal"><span class="pre">tg-admin</span></tt> Command Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="ExtendingQuickstart.html">Extending Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">TurboGears Licenses</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ThirdParty.html">ThirdParty Components Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ChangeLog.html">TurboGears Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TGBooks.html">TurboGears Books</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TGArticles.html">TuboGears Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="PresentationMaterial.html">TurboGears presentation material</a></li>
</ul>

        </div>
      </div>


    <div class="document">
  <div class="documentwrapper">
    <div class="body headerfix">
      
  <div class="section" id="error-handling">
<h1><a class="toc-backref" href="#id1">Error Handling</a><a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#error-handling" id="id1">Error Handling</a><ul>
<li><a class="reference internal" href="#validation-errors" id="id2">Validation Errors</a></li>
<li><a class="reference internal" href="#exceptions-and-rules" id="id3">Exceptions and Rules</a></li>
<li><a class="reference internal" href="#important-hints" id="id4">Important Hints</a></li>
<li><a class="reference internal" href="#further-reading" id="id5">Further reading</a></li>
</ul>
</li>
</ul>
</div>
<p>TurboGears has an extensive system for managing and redirecting errors above and
beyond the standard Python try/except block. The TurboGears error system distinguishes
between (form) validation errors and Python exceptions. They are handled by the
<tt class="docutils literal"><span class="pre">&#64;error_handler()</span></tt> and <tt class="docutils literal"><span class="pre">&#64;exception_handler()</span></tt> directives, respectively.</p>
<div class="section" id="validation-errors">
<span id="index-0"></span><h2><a class="toc-backref" href="#id2">Validation Errors</a><a class="headerlink" href="#validation-errors" title="Permalink to this headline">¶</a></h2>
<p>Validation errors are issued by the TurboGears validator framework. This is
normally used with the widget library, but can also be helpful on its own when
for example you just want to make sure one of your arguments is an integer.
Validation errors are controlled using the <tt class="docutils literal"><span class="pre">&#64;error_handler()</span></tt> decorator and
are handled by a method with a <tt class="docutils literal"><span class="pre">tg_errors</span></tt> keyword parameter.</p>
<p>Here&#8217;s an example of how this decorator works:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">turbogears</span> <span class="kn">import</span> <span class="n">controllers</span><span class="p">,</span> <span class="n">expose</span><span class="p">,</span> \
    <span class="n">validate</span><span class="p">,</span> <span class="n">validators</span><span class="p">,</span> <span class="n">error_handler</span>

<span class="k">class</span> <span class="nc">Root</span><span class="p">(</span><span class="n">controllers</span><span class="o">.</span><span class="n">RootController</span><span class="p">):</span>

    <span class="nd">@expose</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">tg_errors</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Display a number (but actually the argument can be anything).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tg_errors</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="p">[(</span><span class="n">param</span><span class="p">,</span> <span class="n">inv</span><span class="o">.</span><span class="n">msg</span><span class="p">,</span> <span class="n">inv</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">param</span><span class="p">,</span> <span class="n">inv</span> <span class="ow">in</span> <span class="n">tg_errors</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">error_message</span><span class="o">=</span><span class="n">errors</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="n">number</span><span class="p">)</span>

    <span class="nd">@expose</span><span class="p">()</span>
    <span class="nd">@error_handler</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="nd">@validate</span><span class="p">(</span><span class="n">validators</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Int</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">validated_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Display an Integer (other kinds of arguments not allowed).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">valid_number</span><span class="o">=</span><span class="n">number</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code creates two controller methods, one for the root <tt class="docutils literal"><span class="pre">/</span></tt> of the
domain and one for <tt class="docutils literal"><span class="pre">/validated_number</span></tt>.</p>
<p>Both take a parameter <tt class="docutils literal"><span class="pre">number</span></tt> and display it. The index isn&#8217;t picky about its
<tt class="docutils literal"><span class="pre">number</span></tt> parameter and can be passed anything, but <tt class="docutils literal"><span class="pre">validated_number</span></tt> is
decorated with an <tt class="docutils literal"><span class="pre">Int</span></tt> validator, which will raise an error when it fails.
The error is directed back to the <tt class="docutils literal"><span class="pre">index</span></tt> controller, which receives the error
as <tt class="docutils literal"><span class="pre">tg_errors</span></tt> and handles them intelligently.</p>
<div class="section" id="how-does-it-work">
<h3>How Does it Work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h3>
<p>Here&#8217;s the output from a <a class="reference external" href="http://twill.idyll.org/">twill</a> session (slightly formatted) demonstrating
how this all works (<a class="reference external" href="http://twill.idyll.org/">twill</a> is used here for demonstration only. Of course you
can just try it out with your favorite browser):</p>
<div class="highlight-python"><pre>-= Welcome to twill! =-

current page:  *empty page*
&gt;&gt; go http://localhost:8080/
==&gt; at http://localhost:8080/
&gt;&gt; show
{"tg_flash": null, "number": -1}

&gt;&gt; go http://localhost:8080/?number=42
==&gt; at http://localhost:8080/?number=42
&gt;&gt; show
{"tg_flash": null, "number": "42"}

&gt;&gt; go http://localhost:8080/?number=blue
==&gt; at http://localhost:8080/?number=blue
&gt;&gt; show
{"tg_flash": null, "number": "blue"}

&gt;&gt; go http://localhost:8080/validated_number
==&gt; at http://localhost:8080/validated_number
&gt;&gt; show
{"tg_flash": null, "valid_number": 2}

&gt;&gt; go http://localhost:8080/validated_number?number=42
==&gt; at http://localhost:8080/validated_number?number=42
&gt;&gt; show
{"tg_flash": null, "valid_number": 42}

&gt;&gt; go http://localhost:8080/validated_number?number=blue
==&gt; at http://localhost:8080/validated_number?number=blue
&gt;&gt; show
{"tg_flash": null, "error_messages": [["number", "Please enter an integer
value", "blue"]]}</pre>
</div>
<p>The interesting part here is the last request. The <tt class="docutils literal"><span class="pre">validated_number</span></tt>
controller has been passed a bad value <tt class="docutils literal"><span class="pre">blue</span></tt>, which is obviously not an integer.</p>
<p>The validator has detected this and passed control back up to the
<tt class="docutils literal"><span class="pre">index</span></tt> controller as <tt class="docutils literal"><span class="pre">tg_errors</span></tt>, just like we wanted. At the same time,
the normal valid calls also behave as expected. <tt class="docutils literal"><span class="pre">tg_errors</span></tt> itself is a
standard dictionary with the failed parameters as keys and <a class="reference external" href="http://formencode.org/class-formencode.api.Invalid.html">formencode.Invalid</a>
instances as values. The index method shows one (admittedly poor) way to handle
errors. We can do better.</p>
</div>
<div class="section" id="using-error-handler-with-widgets-forms">
<h3>Using <tt class="docutils literal"><span class="pre">error_handler</span></tt> with Widgets Forms<a class="headerlink" href="#using-error-handler-with-widgets-forms" title="Permalink to this headline">¶</a></h3>
<p>Normally when you&#8217;re using <tt class="docutils literal"><span class="pre">&#64;error_handler()</span></tt>, you&#8217;re working with
<a class="reference internal" href="Widgets/SimpleForm.html"><em>Widget based forms</em></a>. Here&#8217;s a demo using the same
basic setup as above:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">turbogears</span> <span class="kn">import</span> <span class="n">controllers</span><span class="p">,</span> <span class="n">expose</span><span class="p">,</span>\
    <span class="n">validate</span><span class="p">,</span> <span class="n">validators</span><span class="p">,</span> <span class="n">error_handler</span><span class="p">,</span> <span class="n">widgets</span>

<span class="n">number_form</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ListForm</span><span class="p">(</span>
    <span class="n">fields</span><span class="o">=</span><span class="p">[</span>
        <span class="n">widgets</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s">&#39;number&#39;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s">&quot;Enter a Number&quot;</span><span class="p">,</span>
            <span class="n">validator</span><span class="o">=</span><span class="n">validators</span><span class="o">.</span><span class="n">Int</span><span class="p">(</span><span class="n">not_empty</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
    <span class="p">],</span>
    <span class="n">submit_text</span><span class="o">=</span><span class="s">&quot;Submit Number!&quot;</span>
<span class="p">)</span>

<span class="c">## This is what the template looks like:</span>
<span class="c"># &lt;html xmlns:py=&quot;http://purl.org/kid/ns#&quot;&gt;</span>
<span class="c">#     &lt;body&gt;</span>
<span class="c">#         &lt;h1&gt;This is a Form Page!&lt;/h1&gt;</span>
<span class="c">#         ${form(value_of(&#39;data&#39;, None), action=action, method=&#39;POST&#39;)}</span>
<span class="c">#     &lt;/body&gt;</span>
<span class="c"># &lt;/html&gt;</span>

<span class="k">class</span> <span class="nc">Root</span><span class="p">(</span><span class="n">controllers</span><span class="o">.</span><span class="n">RootController</span><span class="p">):</span>

    <span class="nd">@expose</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="s">&quot;.templates.welcome&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">tg_errors</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="n">number</span><span class="p">),</span>
                    <span class="n">form</span><span class="o">=</span><span class="n">number_form</span><span class="p">,</span>
                    <span class="n">action</span><span class="o">=</span><span class="s">&#39;/validated_number&#39;</span><span class="p">)</span>

    <span class="nd">@expose</span><span class="p">()</span>
    <span class="nd">@error_handler</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="nd">@validate</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">number_form</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">validated_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">valid_number</span><span class="o">=</span><span class="n">number</span><span class="p">)</span>
</pre></div>
</div>
<p>The biggest change to the previous code (aside from the form being added) is
that the <tt class="docutils literal"><span class="pre">index</span></tt> controller no longer explicitly handles <tt class="docutils literal"><span class="pre">tg_errors</span></tt>.</p>
<p>The convenient thing about forms is that they know how to handle their own
validation errors, so all you have to do is set the error handler and forget
about it.</p>
</div>
<div class="section" id="accessing-current-form-values">
<h3>Accessing Current Form Values<a class="headerlink" href="#accessing-current-form-values" title="Permalink to this headline">¶</a></h3>
<p>It should be noted that when you set a method as the <tt class="docutils literal"><span class="pre">&#64;error_handler</span></tt> for a
form submission, it can have extra variable keyword parameters, which will
receive the current form field values in case of a validation error. This can
be used, e.g. to manipulate the form values or options depending on the current
value of some form field:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@expose</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tg_errors</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">values</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;some_field&#39;</span><span class="p">):</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;some_option&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">some_field</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">some_form</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="nd">@error_handler</span><span class="p">(</span><span class="n">show_form</span><span class="p">)</span>
<span class="nd">@validate</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">some_form</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="exceptions-and-rules">
<span id="index-1"></span><h2><a class="toc-backref" href="#id3">Exceptions and Rules</a><a class="headerlink" href="#exceptions-and-rules" title="Permalink to this headline">¶</a></h2>
<p>Exceptions are handled separately from errors because validation errors are
(somewhat) expected in a web application.</p>
<p>Exceptions, on the other hand, are a bit more serious, so you&#8217;ll probably want
to handle them separately.</p>
<p>The syntax and usage is very similar except you use <tt class="docutils literal"><span class="pre">&#64;exception_handler</span></tt> and
<tt class="docutils literal"><span class="pre">tg_exceptions</span></tt> instead of <tt class="docutils literal"><span class="pre">&#64;error_handler</span></tt> and <tt class="docutils literal"><span class="pre">tg_errors</span></tt>.</p>
<p>One notable difference is that you&#8217;ll probably want to handle different types of
exceptions with different handlers. For example, you&#8217;ll probably want to handle
SQLObject exceptions separately from ValueErrors.</p>
<p>This is done by using the <tt class="docutils literal"><span class="pre">rules</span></tt> parameter (also available on <tt class="docutils literal"><span class="pre">&#64;error_handler()</span></tt>).
<tt class="docutils literal"><span class="pre">rules</span></tt> takes a string containing a valid Python expression. The rule matches
when the expression is true. Here&#8217;s a demonstration:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">turbogears</span> <span class="kn">import</span> <span class="n">controllers</span><span class="p">,</span> <span class="n">expose</span><span class="p">,</span> <span class="n">exception_handler</span>

<span class="k">class</span> <span class="nc">Root</span><span class="p">(</span><span class="n">controllers</span><span class="o">.</span><span class="n">RootController</span><span class="p">):</span>
    <span class="c"># Note that the exception handlers don&#39;t need to be exposed</span>
    <span class="c"># if they&#39;re not meant to be accessed directly. It&#39;s always a</span>
    <span class="c"># wise decision to expose only what is absolutely needed to prevent</span>
    <span class="c"># information leaking.</span>

    <span class="k">def</span> <span class="nf">value_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tg_exceptions</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Only called for value errors.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">handling_value</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">tg_exceptions</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">index_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tg_exceptions</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Only called for index errors.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">handling_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">exception</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">tg_exceptions</span><span class="p">))</span>

    <span class="nd">@expose</span><span class="p">()</span>
    <span class="nd">@exception_handler</span><span class="p">(</span><span class="n">value_handler</span><span class="p">,</span> <span class="s">&quot;isinstance(tg_exceptions, ValueError)&quot;</span><span class="p">)</span>
    <span class="nd">@exception_handler</span><span class="p">(</span><span class="n">index_handler</span><span class="p">,</span> <span class="s">&quot;isinstance(tg_exceptions, IndexError)&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">exceptional</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">number</span> <span class="o">&lt;</span> <span class="mi">42</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s">&quot;Number too Low!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">42</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s">&quot;Wise guy, eh?&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;This number is exceptionally high!&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="s">&quot;No errors!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And here&#8217;s the twill output:</p>
<div class="highlight-python"><pre>current page:  *empty page*
&gt;&gt; go http://localhost:8080/exceptional
==&gt; at http://localhost:8080/exceptional
&gt;&gt; show
{"exception": "Number too Low!", "handling_index": true, "tg_flash": null}

&gt;&gt; go http://localhost:8080/exceptional?number=42
==&gt; at http://localhost:8080/exceptional?number=42
&gt;&gt; show
{"exception": "Wise guy, eh?", "handling_index": true, "tg_flash": null}

&gt;&gt; go http://localhost:8080/exceptional?number=blue
==&gt; at http://localhost:8080/exceptional?number=blue
&gt;&gt; show
{"exception": "invalid literal for int(): blue", "tg_flash": null, "handling_value": true}

&gt;&gt; debug http 1
DEBUG: setting http debugging to level 1

&gt;&gt; go http://localhost:8080/exceptional?number=400
# ...
reply: 'HTTP/1.1 500 Internal error\r\n'
# ...</pre>
</div>
<p>Notice that the calls for where <tt class="docutils literal"><span class="pre">number</span></tt> was less than 42 went to the
<tt class="docutils literal"><span class="pre">index_handler</span></tt> (<tt class="docutils literal"><span class="pre">handling_index</span></tt> in the output) and that the non-int raised
a value error. The final case shows that the built in CherryPy handling
mechanisms will cover any unhandled case. You can, of course, redirect all the
unhandled exceptions by using a <tt class="docutils literal"><span class="pre">&#64;exception_handler()</span></tt> without the <tt class="docutils literal"><span class="pre">rules</span></tt>
parameter.</p>
</div>
<div class="section" id="important-hints">
<h2><a class="toc-backref" href="#id4">Important Hints</a><a class="headerlink" href="#important-hints" title="Permalink to this headline">¶</a></h2>
<div class="section" id="python-2-3-compatibility">
<h3>Python 2.3 Compatibility<a class="headerlink" href="#python-2-3-compatibility" title="Permalink to this headline">¶</a></h3>
<p>The Python 2.3 <a class="reference internal" href="Install/Python2.3Support.html"><em>pseudo-decorator syntax</em></a> does
not work with <tt class="docutils literal"><span class="pre">error_handler</span></tt>. So use</p>
<div class="highlight-python"><pre># GOOD
[expose(template=".templates.index")]
def index(self, query, tg_errors=None):

[expose(".templates.results")]
[validate(form=search_form)]
def search(self, query):
    return dict(form=search_form)
search = error_handler(index)(search)</pre>
</div>
<p>instead of</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># BAD, DOES NOT WORK!</span>
<span class="p">[</span><span class="n">expose</span><span class="p">(</span><span class="s">&quot;.templates.results&quot;</span><span class="p">)]</span>
<span class="p">[</span><span class="n">validate</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">search_form</span><span class="p">)]</span>
<span class="p">[</span><span class="n">error_handler</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span>
<span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">search_form</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="decorator-order">
<h3>Decorator Order<a class="headerlink" href="#decorator-order" title="Permalink to this headline">¶</a></h3>
<p>For the most part, the order of the decorators doesn&#8217;t matter too much. The one
exception occurs when mixing error handling and the Identity framework and
having a method serve as its own error handler. If your <tt class="docutils literal"><span class="pre">&#64;error_handler()</span></tt>
decorator is under your <tt class="docutils literal"><span class="pre">&#64;identity_require()</span></tt> decorator, you&#8217;ll bypass the
identity decorator completely and defeat your own security.  Don&#8217;t do it.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@expose</span><span class="p">()</span>
<span class="nd">@identity.require</span><span class="p">(</span><span class="n">identity</span><span class="o">.</span><span class="n">not_anonymous</span><span class="p">())</span>
<span class="nd">@error_handler</span><span class="p">()</span>                             <span class="c">#BAD, DON&#39;T DO IT</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tg_errors</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@expose</span><span class="p">()</span>
<span class="nd">@error_handler</span><span class="p">()</span>                            <span class="c">#OK, be careful</span>
<span class="nd">@identity.require</span><span class="p">(</span><span class="n">identity</span><span class="o">.</span><span class="n">not_anonymous</span><span class="p">())</span>
<span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tg_errors</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tg_errors</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@expose</span><span class="p">()</span>
<span class="nd">@identity.require</span><span class="p">(</span><span class="n">identity</span><span class="o">.</span><span class="n">not_anonymous</span><span class="p">())</span>
<span class="nd">@error_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>                     <span class="c">#GOOD</span>
<span class="k">def</span> <span class="nf">baz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="further-reading">
<h2><a class="toc-backref" href="#id5">Further reading</a><a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
<p>See <a class="reference internal" href="HowDoesErrorHandlingWork.html"><em>&#8220;How Does Error Handling Work?&#8221;</em></a> for some
more details and references.</p>
</div>
</div>


    </div>
  </div>
      <div class="clearer"></div>
    </div>
  <div class="footer"><span>
      &copy; Copyright 
      by the <a href="">TurboGears</a> Doc Team.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
  </span></div>
  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-7088080-2");
  pageTracker._trackPageview();
  } catch(err) {}</script>
  </body>
</html>